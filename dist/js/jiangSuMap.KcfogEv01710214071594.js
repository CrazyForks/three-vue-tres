import{az as $,be as K,k as W,a5 as Y,o as r,c as i,E as x,G as Q,v as B,D as v,W as o,t as U,a7 as O,K as m,al as Z,X as f,bd as ee,b1 as te,aq as z,as as oe,av as se,bi as ne,b0 as re,cA as ae,$ as ie,a0 as G,a8 as pe,a as D,a9 as ce,aa as le,ab as de,ag as ue}from"./vendor.8CtyBQ9Q1710214071594.js";import{l as he,c as _e,d as fe,a as me}from"./utils._DKVRH9t1710214071594.js";import{m as ye}from"./mercator.ciCk-WjI1710214071594.js";import"./Water2.TiR7OunK1710214071594.js";import"./Reflector.fna4X1MS1710214071594.js";const ge=["position"],Te=["blending","map"],Me=["name","renderOrder"],be=["args"],xe=["color","side"],Be=["renderOrder","position-z"],ve=["position"],Se=o("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1),we=["renderOrder"],Le=["position"],Ee=o("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1),Pe={__name:"jiangSuMapMesh",async setup(j){let s,a;(()=>{z.prototype.computeBoundsTree=_e,z.prototype.disposeBoundsTree=fe,oe.prototype.raycast=me})();const y=([s,a]=$(()=>he("./plugins/simpleGIS/json/320000_full.json","features")),s=await s,a(),s),{map:F}=([s,a]=$(()=>K({map:"./plugins/simpleGIS/image/icon.png"})),s=await s,a(),s),I=y[0].properties.centroid,p=ye();p.center(I).translate([0,0]);const c=[];(()=>{y.forEach(t=>{const g=new se("hsl( 16, ".concat(Math.random()*30+55,"%, ").concat(Math.random()*30+55,"%)")).getHex(),e=Math.random()*.3+.3,{centroid:n,oneCenter:X,center:q,name:S}=t.properties,{coordinates:J,type:w}=t.geometry,L=n||X||q||[0,0],d=p(L);d[1]=-d[1],d[2]=e,c.push({type:"Html",position:d,name:S});const u=p(L);u[1]=-u[1]+.2,u[2]=e+.22,c.push({type:"Sprite",position:u}),J.forEach(E=>{function P(h){const T=new ae;h.forEach((M,b)=>{const[_,C]=p(M);b===0?T.moveTo(_,-C):T.lineTo(_,-C)}),c.push({type:"Shape",shape:T,name:S,color:g,depth:e});const k=[];h.forEach(M=>{const[b,_]=p(M);k.push(b,-_,0)}),c.push({type:"Line",points:new Float32Array(k),depth:e})}w==="MultiPolygon"&&E.forEach(h=>P(h)),w==="Polygon"&&P(E)})})})();const N=t=>{t.rotation.x=-Math.PI/2;const e=new ne().setFromObject(t).getCenter(new re),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]},l=W();Y(()=>{l.value&&(N(l.value),l.value.children.forEach(t=>{t.type==="Mesh"&&t.geometry.computeBoundsTree()}))});const R=t=>{t.object.material.opacity=.4},V=t=>{t.material.opacity=1},H={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,g)=>(r(),i("TresGroup",{ref_key:"tgRef",ref:l},[(r(),i(x,null,Q(c,(e,n)=>(r(),i(x,{key:"".concat(n)},[e.type==="Html"?(r(),B(m(Z),O({key:0},H,{position:e.position}),{default:v(()=>[o("span",null,U(e.name),1)]),_:2},1040,["position"])):f("",!0),e.type==="Sprite"?(r(),i("TresSprite",{key:1,position:e.position,scale:.3,renderOrder:1e3},[o("TresSpriteMaterial",{color:16711680,blending:ee,map:m(F)},null,8,Te)],8,ge)):f("",!0),e.type==="Shape"?(r(),i("TresMesh",{key:2,name:e.name,renderOrder:n,onPointerEnter:R,onPointerLeave:V},[o("TresExtrudeGeometry",{args:[e.shape,{depth:e.depth,bevelEnabled:!1}]},null,8,be),o("TresMeshStandardMaterial",{color:e.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:te},null,8,xe)],40,Me)):f("",!0),e.type==="Line"?(r(),i(x,{key:3},[o("TresLine",{renderOrder:n,"position-z":e.depth+1e-4},[o("TresBufferGeometry",{position:[e.points,3]},null,8,ve),Se],8,Be),o("TresLine",{renderOrder:n,"position-z":-1e-4},[o("TresBufferGeometry",{position:[e.points,3]},null,8,Le),Ee],8,we)],64)):f("",!0)],64))),64))],512))}},ke=o("TresPerspectiveCamera",{position:[0,12,0],fov:75,near:.1,far:1e3},null,-1),Ce=o("TresAmbientLight",{intensity:8.8},null,-1),$e=o("TresDirectionalLight",{position:[0,10,5],intensity:.2},null,-1),ze=o("TresDirectionalLight",{position:[0,10,-5],intensity:.2},null,-1),Ge=o("TresDirectionalLight",{position:[5,10,0],intensity:.2},null,-1),De=o("TresDirectionalLight",{position:[-5,10,0],intensity:.2},null,-1),Re=ie({__name:"jiangSuMap",setup(j){const s=G({clearColor:"#ffdbd1",alpha:!0,antialias:!0}),a=G({enableDamping:!0,dampingFactor:.05});return(A,y)=>(r(),B(m(pe),O(s,{"window-size":""}),{default:v(()=>[ke,D(m(de),ce(le(a)),null,16),Ce,$e,ze,Ge,De,(r(),B(ue,null,{default:v(()=>[D(Pe)]),_:1}))]),_:1},16))}});export{Re as default};
