var H=Object.defineProperty;var V=(o,e,t)=>e in o?H(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var S=(o,e,t)=>(V(o,typeof e!="symbol"?e+"":e,t),t);import{cG as B,bt as q,bL as N,ap as K,az as _,aw as F,a0 as I,cH as W,bf as X,cI as J,aF as Q,bB as M,cs as U,bq as Y,b3 as Z,ak as ee,a5 as T,a8 as ae,aD as te,aE as se,o as b,c as z,X as g,K as m,a as c,cg as oe,E as O,k as ne,a1 as C,a2 as re,a3 as ie,r as ce,D as k,a7 as L,ab as le,a9 as me,aa as ue,v as G,ag as j}from"./vendor.fZWouSnL1712126651134.js";import{_ as he}from"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.MWZtujE41712126651134.js";/* empty css                                                                                 */import{_ as pe}from"./randomLoading.vue_vue_type_script_setup_true_lang.zZ9lZwQy1712126651134.js";import{L as de,C as fe,D as we}from"./vanilla.9zLr8prN1712126651134.js";import"./ReflectorMaterial.Zm0l0jAc1712126651134.js";import"./dither.glsl.y2WXw1t-1712126651134.js";import"./OimoPhysicsBuffer.-Azeqs8E1712126651134.js";import"./starLoading.y3aOpW1v1712126651134.js";import"./bubbleLoading.0hRLtbcK1712126651134.js";import"./vanilla.MD--V1Gz1712126651134.js";import"./_commonjsHelpers.5-cIlDoe1712126651134.js";class l{constructor(e={}){S(this,"material");S(this,"mesh");const{color:t="white",form:i="rect",intensity:r=1}=e,a={circle:new B(0,1,64),ring:new B(.5,1,64),rect:new q}[i],s=new N({side:K,color:new _(t)});s.color.multiplyScalar(r),this.material=s;const n=new F(a,s);this.mesh=n}}const _e=I({__name:"environmentForLightformers",props:{resolution:{default:256},near:{default:1},far:{default:1e3}},setup(o){const e=o,t=new W(e.resolution);t.texture.type=X;const i=new J(e.near,e.far,t),r=new Q,a=new M,s=new l;s.mesh.scale.set(10,10,1),s.mesh.position.set(0,5,-9),s.mesh.rotation.x=Math.PI/2;const n=new l({intensity:4});n.mesh.scale.set(20,.1,1),n.mesh.position.set(-5,1,-1),n.mesh.rotation.y=Math.PI/2;const u=new l;u.mesh.scale.set(20,.5,1),u.mesh.position.set(-5,-1,-1),u.mesh.rotation.y=Math.PI/2;const h=new l;h.mesh.scale.set(20,1,1),h.mesh.position.set(10,1,0),h.mesh.rotation.y=-Math.PI/2;const v=new l({form:"ring",color:"red"});v.mesh.scale.set(10,10,10),v.mesh.position.set(-15,4,-18),a.add(s.mesh,n.mesh,u.mesh,h.mesh,v.mesh);const y=new M;y.rotation.set(0,.5,0);const p=new M;y.add(p),[2,0,2,0,2,0,2,0].forEach((f,P)=>{const w=new l({form:"circle",intensity:2});w.mesh.rotation.x=Math.PI/2,w.mesh.scale.set(3,1,1),w.mesh.position.set(f,4,P*4),p.add(w.mesh)}),a.add(y);const R=new U(1,64,64),E=new de({side:Y,layers:[new fe({color:"#444",mode:"normal",alpha:1}),new we({colorA:"blue",colorB:"black",alpha:.5,mode:"normal",near:0,far:300,origin:new Z(100,100,100)})]}),x=new F(R,E);x.scale.set(100,100,100),a.add(x);const{scene:d,renderer:$,sizes:D}=ee();T(()=>{D.width.value&&r.add(a)});const{onBeforeLoop:A}=ae();return A(({delta:f})=>{d.value&&((p.position.z+=f*10)>20&&(p.position.z=-60),i.update($.value,r),d.value.environment=t.texture,d.value.background=t.texture,d.value.backgroundBlurriness=1)}),(f,P)=>null}}),be=["object"],ge={__name:"carModel",async setup(o){let e,t;const{scene:i,nodes:r,materials:a}=([e,t]=te(()=>se("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/industry4/911-transformed.glb",{draco:!0,decoderPath:"./draco/"})),e=await e,t(),e);return Object.values(r).forEach(s=>{s.isMesh&&(s.receiveShadow=s.castShadow=!0)}),a.rubber.color=new _("#222"),a.rubber.roughness=.6,a.rubber.roughnessMap=null,a.rubber.normalScale=[4,4],a.window.color=new _("black"),a.window.roughness=0,a.window.clearcoat=.1,a.coat.envMapIntensity=4,a.coat.roughness=.4,a.coat.metalness=1,a.paint.envMapIntensity=2.6,a.paint.roughness=.345,a.paint.metalness=.9,a.paint.color=new _("#666"),(s,n)=>(b(),z(O,null,[g("primitive",{object:m(i)},null,8,be),c(m(oe),{opacity:.6,blur:.5,position:[0,-.7,0],frames:100,scale:10,far:100})],64))}},ve=g("TresPerspectiveCamera",{position:[5,1,5],fov:30,near:1,far:1e3},null,-1),ye=g("TresAmbientLight",{color:"#ffffff",intensity:"2.5"},null,-1),Oe=I({__name:"showCar",setup(o){const e=ne(null);T(()=>{e.value&&(e.value.shadow.mapSize.width=1024,e.value.shadow.mapSize.height=1024,e.value.shadow.camera.near=1,e.value.shadow.camera.far=100,e.value.shadow.bias=-1e-4)});const t=C({reflectivity:.1,mirror:.92,mixStrength:36,showGridHelper:!1}),i=C({clearColor:"#82839f",shadows:!0,alpha:!1,antialias:!0,pixelRatio:window.devicePixelRatio,shadowMapType:re,outputColorSpace:ie,toneMapping:void 0,useLegacyLights:!0}),r=C({autoRotate:!0});return(a,s)=>{const n=ce("TresCanvas");return b(),z(O,null,[c(m(pe)),c(n,L(i,{"window-size":""}),{default:k(()=>[ve,c(m(le),me(ue(r)),null,16),ye,g("TresSpotLight",{ref_key:"spotLight",ref:e,position:[0,15,0],angle:.3,penumbra:1,castShadow:"",intensity:2},null,512),(b(),G(j,null,{default:k(()=>[c(ge)]),_:1})),(b(),G(j,null,{default:k(()=>[c(he,L(t,{position:[0,-.6,0]}),null,16)]),_:1})),c(m(_e))]),_:1},16)],64)}}});export{Oe as default};
