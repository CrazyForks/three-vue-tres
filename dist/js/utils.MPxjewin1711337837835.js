import{av as l,bc as m,au as c,aw as f,bd as d,az as h,aH as i,ap as w}from"./vendor.-e8za0Pb1711337837835.js";import{W as g}from"./Water2.JKAv0Wjh1711337837835.js";import{c as b,d as x,a as B}from"./ExtensionUtilities.6PM5ntza1711337837835.js";const v=(e,s=!1)=>{e.computeBoundingBox();const{max:o,min:t}=e.boundingBox;e.deleteAttribute("uv");const r=o.x-t.x,u=o.y-t.y,n=[];for(let a=0;a<e.attributes.position.count;a++)s?(n.push((e.attributes.position.getX(a)-(t.x+o.x)/2)/r),n.push((e.attributes.position.getY(a)-(t.y+o.y)/2)/u)):(n.push((e.attributes.position.getX(a)-t.x)/r),n.push((e.attributes.position.getY(a)-t.y)/u));const p=new Float32Array(n);e.setAttribute("uv",new l(p,2))},M=(e,s)=>new Promise((o,t)=>{m(e,{},{method:"get"}).then(r=>{s&&o(r[s]),o(r.features)}).catch(r=>{console.error(r),t(error)})}),_=()=>{c.prototype.computeBoundsTree=b,c.prototype.disposeBoundsTree=x,f.prototype.raycast=B},P=async e=>{const s=await d(["./plugins/water/images/Water_1_M_Normal.jpg","./plugins/water/images/Water_2_M_Normal.jpg"]),o=e.geometry.clone();v(o),o.computeBoundsTree();const t=new g(o,{color:new h("#fff"),scale:20,flowDirection:new i(1,1),textureWidth:1024,textureHeight:1024,normalMap0:s[0],normalMap1:s[1]});return t.material.transparent=!0,t.material.depthWrite=!0,t.material.depthTest=!0,t.material.side=w,t.material.uniforms.config.value.w=20,t.material.uniforms.reflectivity.value=.46,t};function A(e){const s=[];for(let t=0;t<e.length;t++)s.push(new i(e[t].x,e[t].y));const o=new i;for(let t=0;t<s.length;t++)o.add(s[t]);o.divideScalar(s.length);for(let t=0;t<s.length;t++)s[t].sub(o);return{points:s,centerPoint:o}}export{A as g,_ as i,M as l,v as r,P as s};
