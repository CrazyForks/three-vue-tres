import{Z as S,aB as L,aC as P,aO as G,aS as p,a4 as N,a3 as A,aG as E,o as O,c as z,J as D}from"./vendor.63b8dc9b1704502812662.js";import{r as F,u as H}from"./device.b7bc6b8a1704502812662.js";const J=["object"],Z=S({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(_){let l,d;const t=_,{nodes:r}=([l,d]=L(()=>P("./plugins/industry4/model/modelDraco.glb",{draco:!0})),l=await l,d(),l),v=F(r.Sketchfab_model),{camera:h,renderer:g,scene:o,sizes:f}=G();let n=null,u=null,a=null;const M=new p({color:"black"});N(()=>{if(h.value){o.value.add(v);const{finalComposer:e,effectComposer:s,bloomPass:x}=H(o.value,h.value,g.value,f.width.value,f.height.value);n=e,u=s,a=x,a.threshold=t.threshold,a.strength=t.strength,a.radius=t.radius}t.threshold&&(a.threshold=t.threshold),t.strength&&(a.strength=t.strength),t.radius&&(a.radius=t.radius)});const i={},k=e=>{(e.isMesh||e.type==="GridHelper"||e.name==="reflectorShaderMesh")&&(i[e.uuid]=e.material,e.material=M)},B=e=>{i[e.uuid]&&(e.material=i[e.uuid],delete i[e.uuid])},{onLoop:b,onAfterLoop:C}=A();let m=.03,c=r.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),w=c.material.clone(),y=new p({color:new E("red"),transparent:!0,opacity:1});return b(({elapsed:e})=>{r.hull_turbine&&(r.hull_turbine.rotation.x+=m,r.blades_turbine_003.rotation.x+=m),Math.floor(e)%2?c.material=w:c.material=y}),C(({elapsed:e})=>{u&&(o.value.traverse(s=>{k(s)}),u.render(e)),n&&(o.value.traverse(s=>{B(s)}),n.render(e))}),(e,s)=>(O(),z("primitive",{object:D(r).Sketchfab_model},null,8,J))}});export{Z as _};
