import{Z as S,aA as V,aB as $,aN as E,aR as b,a4 as H,a3 as F,aM as I,o as m,c as J,J as _,$ as f,a0 as O,a1 as X,a2 as Z,af as q,v as w,C,a6 as K,a7 as Q,a as k,a8 as x,a9 as y,aa as U,aD as W,V as d}from"./vendor.e78e09731703301023089.js";import{r as Y,u as j}from"./device.a77185581703301023089.js";import"./BufferGeometryUtils.967229021703301023089.js";import"./EffectComposer.117d4ddf1703301023089.js";const ee=["object"],te=S({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(g){let r,l;const t=g,{nodes:a}=([r,l]=V(()=>$("./plugins/industry4/model/modelDraco.glb",{draco:!0})),r=await r,l(),r),v=Y(a.Sketchfab_model),{camera:c,renderer:P,scene:n,sizes:B}=E();let u=null,h=null,s=null;const L=new b({color:"black"});H(()=>{if(c.value){n.value.add(v);const{finalComposer:e,effectComposer:o,bloomPass:D}=j(n.value,c.value,P.value,B.width.value,B.height.value);u=e,h=o,s=D,s.threshold=t.threshold,s.strength=t.strength,s.radius=t.radius}t.threshold&&(s.threshold=t.threshold),t.strength&&(s.strength=t.strength),t.radius&&(s.radius=t.radius)});const i={},N=e=>{(e.isMesh||e.type==="GridHelper")&&(i[e.uuid]=e.material,e.material=L)},R=e=>{i[e.uuid]&&(e.material=i[e.uuid],delete i[e.uuid])},{onLoop:T,onAfterLoop:A}=F();let M=.03,p=a.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),G=p.material.clone(),z=new b({color:new I("red"),transparent:!0,opacity:1});return T(({elapsed:e})=>{a.hull_turbine&&(a.hull_turbine.rotation.x+=M,a.blades_turbine_003.rotation.x+=M),Math.floor(e)%2?p.material=G:p.material=z}),A(({elapsed:e})=>{h&&(n.value.traverse(o=>{N(o)}),h.render(e)),u&&(n.value.traverse(o=>{R(o)}),u.render(e))}),(e,o)=>(m(),J("primitive",{object:_(a).Sketchfab_model},null,8,ee))}}),ae=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:1,far:1e3},null,-1),se=d("TresAmbientLight",{color:"#ffffff",intensity:"40"},null,-1),re=d("TresDirectionalLight",{position:[0,2,-4],intensity:1},null,-1),oe=d("TresGridHelper",{position:[0,-1,0]},null,-1),ce=S({__name:"deviceLight",setup(g){const r=f({clearColor:"#000",shadows:!0,alpha:!1,shadowMapType:O,outputColorSpace:X,toneMapping:Z,disableRender:!0}),l=f({autoRotate:!0}),t=f({threshold:0,strength:.6,radius:.21}),a=new q({title:"参数"});return a.addBinding(t,"threshold",{label:"阈值",min:0,max:1,step:.1}),a.addBinding(t,"strength",{label:"强度",min:0,max:3,step:.2}),a.addBinding(t,"radius",{label:"半径",min:0,max:1,step:.1}),(v,c)=>(m(),w(_(Q),K(r,{"window-size":""}),{default:C(()=>[ae,k(_(U),x(y(l)),null,16),se,re,(m(),w(W,null,{default:C(()=>[k(te,x(y(t)),null,16)]),_:1})),oe]),_:1},16))}});export{ce as default};
