import{Z as g,aP as v,aB as b,b1 as x,bh as s,a_ as m,aR as y,b8 as S,aT as M,bg as R,a4 as B,w as j,o as G,c as T,V as p,J as u}from"./vendor.56c367c31704931946430.js";import{R as H}from"./ReflectorMaterial.19f22ad01704931946430.js";import{R as C}from"./OimoPhysicsBuffer.c19645bf1704931946430.js";const P=["position"],V=["object"],k=["object"],I=g({__name:"reflectorShaderMesh",props:{reflectivity:{default:.2},mirror:{default:.1},mixStrength:{default:9},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"},position:{default:[0,-1,0]}},async setup(h){let i,c;const e=h,{scene:d}=v(),o=([i,c]=b(()=>x(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/concrete_wet_floor_normal.jpg"])),i=await i,c(),i);o[0].wrapS=s,o[0].wrapT=s,o[1].wrapS=s,o[1].wrapT=s;const a=new C,t=new H({reflectivity:e.reflectivity,mirror:e.mirror,mixStrength:e.mixStrength,color:new m(e.color),map:o[0],normalMap:o[1],normalScale:new y(5,5),fog:d.fog,dithering:!0});t.uniforms.tReflect=a.renderTargetUniform,t.uniforms.uMatrix=a.textureMatrixUniform;const _=new S(10,10),r=new M(_,t);r.name="reflectorShaderMesh",r.position.y=-.01,r.rotation.x=-Math.PI/2,r.add(a),r.onBeforeRender=(n,f,w)=>{r.visible=!1,a.update(n,f,w),r.visible=!0};const l=new R(9.5,10);return l.visible=e.showGridHelper,B(()=>{e.reflectivity&&(t.uniforms.uReflectivity.value=e.reflectivity),e.mirror&&(t.uniforms.uMirror.value=e.mirror),e.mixStrength&&(t.uniforms.uMixStrength.value=e.mixStrength),e.color&&(t.uniforms.uColor.value=new m(e.color))}),j(()=>e.showGridHelper,n=>{l.visible=n}),(n,f)=>(G(),T("TresGroup",{position:e.position},[p("primitive",{object:u(r)},null,8,V),p("primitive",{object:u(l)},null,8,k)],8,P))}});export{I as _};
