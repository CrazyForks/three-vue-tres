import{_ as S}from"./pagesShow.vue_vue_type_script_setup_true_lang.e04b06be1703747978034.js";import{Z as R,k as w,aB as x,aQ as j,b6 as J,aH as M,bh as E,a4 as G,a3 as L,o as s,c as p,D as V,E as A,V as B,J as f,aO as H,aM as P,$ as Y,af as $,v as u,C as m,aA as C,a as b,a6 as N}from"./vendor.08a60d9a1703747978034.js";import{l as O}from"./utils.9bccc6641703747978034.js";import"./vanilla-307d3a93.esm.2411fe671703747978034.js";import"./_commonjsHelpers.725317a41703747978034.js";const D=["position","rotation-y","scale"],F={renderOrder:3e3},Q=["args"],U=["map","side","color"],k=6e4,v=R({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},position:{default:[1837.0641427711184,30,-457.0929823910632]},radius:{default:2},rotationY:{default:-.3866683251512052},scale:{default:1.5083171193254858},speed:{default:1}},async setup(_){let e,o;const a=_,g=w(),n=w(),{map:t}=([e,o]=x(()=>j({map:"./plugins/digitalCity/image/line.png"})),e=await e,o(),e);t.needsUpdate=!0,t.wrapS=t.wrapT=J,t.repeat.set(1,1);const h=([e,o]=x(()=>O(a.geoJson)),e=await e,o(),e),i=[-31.258949,0,-121.465782];let y=[];for(var l=0;l<h.length;l++){const c=h[l],d=[];c.geometry.coordinates.forEach(r=>{d.push(new M((r[1]+i[0])*k,i[1],(r[0]+i[2])*k))}),y.push(new E(d))}G(()=>{a.color&&n.value&&(n.value.color=new P(a.color))});const{onLoop:T}=L();return T(({delta:c})=>{t.offset.x-=Math.random()/20*a.speed}),(c,d)=>(s(),p("TresGroup",{ref_key:"tgRef",ref:g,position:a.position,"rotation-y":a.rotationY,scale:a.scale},[(s(!0),p(V,null,A(f(y),r=>(s(),p("TresMesh",F,[B("TresTubeGeometry",{args:[r,64,a.radius,20,!1]},null,8,Q),B("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:n,map:f(t),side:f(H),transparent:!0,color:a.color},null,8,U)]))),256))],8,D))}}),K=R({__name:"roadLines",setup(_){const e=Y({color:"#ffffff",radius:2,speed:2}),o=new $({title:"道路效果",expanded:!0});return o.addBinding(e,"color",{label:"颜色"}),o.addBinding(e,"speed",{label:"速度",min:.1,max:5,step:.1}),o.addBinding(e,"radius",{label:"粗细",min:1,max:8,step:.1}),(a,g)=>(s(),u(S,{showAxesHelper:!1,showBuildings:!0,autoRotate:!1,showGridHelper:!1},{ability:m(()=>[(s(),u(C,null,{default:m(()=>[b(v,{radius:3,geoJson:"plugins/digitalCity/geojson/primary.geojson"})]),_:1})),(s(),u(C,null,{default:m(()=>[b(v,N(e,{geoJson:"plugins/digitalCity/geojson/secondary.geojson",rotationY:-.40417060831376245,scale:1.5083171193254858,position:[1835.1352780974694,30,-358.6036261374844]}),null,16)]),_:1}))]),_:1}))}});export{K as default};
