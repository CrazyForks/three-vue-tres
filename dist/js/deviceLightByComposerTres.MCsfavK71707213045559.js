import{$ as y,aj as E,ak as F,as as G,b2 as w,a5 as V,a4 as j,am as I,o as g,c as K,W as l,K as d,E as O,a0 as _,a1 as W,a2 as X,a3 as q,at as H,v as C,D as M,a7 as J,a8 as Q,a as k,a9 as x,aa as S,ab as U,ai as Y}from"./vendor.sYOrX-WA1707213045559.js";import{r as Z,u as ee}from"./device.T3GoMtXn1707213045559.js";import"./BufferGeometryUtils.hbytXVX01707213045559.js";import"./EffectComposer.Qt0IpTG71707213045559.js";import"./UnrealBloomPass.uDDK_qm-1707213045559.js";const te=["object"],ae=["object"],se=y({__name:"ByComposerTres",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(v){let r,n;const t=v,{nodes:a}=([r,n]=E(()=>F("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"})),r=await r,n(),r),i=Z(a.Sketchfab_model),{camera:u,renderer:P,scene:h,sizes:b}=G();let p=null,m=null,s=null;const L=new w({color:"black"});V(()=>{if(u.value){const{finalComposer:e,effectComposer:o,bloomPass:D}=ee(h.value,u.value,P.value,b.width.value,b.height.value);p=e,m=o,s=D,s.threshold=t.threshold,s.strength=t.strength,s.radius=t.radius}t.threshold&&(s.threshold=t.threshold),t.strength&&(s.strength=t.strength),t.radius&&(s.radius=t.radius)});const c={},T=e=>{e.isMesh&&(c[e.uuid]=e.material,e.material=L)},N=e=>{c[e.uuid]&&(e.material=c[e.uuid],delete c[e.uuid])},{onLoop:R,onAfterLoop:$}=j();let B=.03,f=a.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),z=f.material.clone(),A=new w({color:new I("red"),transparent:!0,opacity:1});return R(({elapsed:e})=>{a.hull_turbine&&(a.hull_turbine.rotation.x+=B,a.blades_turbine_003.rotation.x+=B),Math.floor(e)%2?f.material=z:f.material=A}),$(({elapsed:e})=>{m&&(h.value.traverse(o=>{T(o)}),m.render(e)),p&&(h.value.traverse(o=>{N(o)}),p.render(e))}),(e,o)=>(g(),K(O,null,[l("primitive",{object:d(a).Sketchfab_model},null,8,te),l("primitive",{object:d(i)},null,8,ae)],64))}}),re=l("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:1,far:1e3},null,-1),oe=l("TresAmbientLight",{color:"#ffffff",intensity:"40"},null,-1),le=l("TresDirectionalLight",{position:[0,2,-4],intensity:1},null,-1),he=y({__name:"deviceLightByComposerTres",setup(v){const r=_({clearColor:"#000",shadows:!0,alpha:!1,shadowMapType:W,outputColorSpace:X,toneMapping:q}),n=_({autoRotate:!0}),t=_({threshold:0,strength:.972,radius:.21}),a=new H({title:"参数"});return a.addBinding(t,"threshold",{label:"阈值",min:0,max:1,step:.1}),a.addBinding(t,"strength",{label:"强度",min:0,max:3,step:.2}),a.addBinding(t,"radius",{label:"半径",min:0,max:1,step:.1}),a.addBlade({view:"text",label:"post-processing",parse:i=>String(i),value:"未完成：等待Tresjs库更新"}),(i,u)=>(g(),C(d(Q),J(r,{"window-size":""}),{default:M(()=>[re,k(d(U),x(S(n)),null,16),oe,le,(g(),C(Y,null,{default:M(()=>[k(se,x(S(t)),null,16)]),_:1}))]),_:1},16))}});export{he as default};
