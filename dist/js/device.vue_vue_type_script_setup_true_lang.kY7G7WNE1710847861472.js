import{$ as P,aD as L,aE as S,ak as E,bb as p,a5 as N,a4 as z,az as A,o as D,c as G,K as F}from"./vendor.Cjb8724R1710847861472.js";import{r as H,u as K}from"./device.POxM7xbm1710847861472.js";const O=["object"],$=P({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(_){let l,u;const t=_,{nodes:r}=([l,u]=L(()=>S("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"})),l=await l,u(),l),v=H(r.Sketchfab_model),{camera:h,renderer:g,scene:s,sizes:f}=E();let n=null,c=null,a=null;const M=new p({color:"black"});N(()=>{if(h.value){s.value.add(v);const{finalComposer:e,effectComposer:o,bloomPass:x}=K(s.value,h.value,g.value,f.width.value,f.height.value);n=e,c=o,a=x,a.threshold=t.threshold,a.strength=t.strength,a.radius=t.radius}t.threshold&&(a.threshold=t.threshold),t.strength&&(a.strength=t.strength),t.radius&&(a.radius=t.radius)});const i={},b=e=>{(e.isMesh||e.type==="GridHelper"||e.name==="reflectorShaderMesh")&&(i[e.uuid]=e.material,e.material=M)},k=e=>{i[e.uuid]&&(e.material=i[e.uuid],delete i[e.uuid])},{onLoop:B,onAfterLoop:w}=z();let m=.03,d=r.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),C=d.material.clone(),y=new p({color:new A("red"),transparent:!0,opacity:1});return B(({elapsed:e})=>{r.hull_turbine&&(r.hull_turbine.rotation.x+=m,r.blades_turbine_003.rotation.x+=m),Math.floor(e)%2?d.material=C:d.material=y}),w(({elapsed:e})=>{c&&(s.value.traverse(o=>{b(o)}),c.render(e)),n&&(s.value.traverse(o=>{k(o)}),n.render(e))}),(e,o)=>(D(),G("primitive",{object:F(r).Sketchfab_model},null,8,O))}});export{$ as _};
