import{aD as $,bd as W,k as Y,a5 as q,o as r,c as i,E as B,G as Q,v as b,D as w,W as o,t as U,a7 as O,K as m,al as Z,X as f,bO as ee,ap as te,au as z,aw as oe,az as se,bp as ne,b3 as re,c5 as ae,$ as ie,a0 as D,a8 as pe,a as G,a9 as ce,aa as le,ab as de,ag as ue}from"./vendor.arGmYKdh1710982118573.js";import{l as he}from"./utils.qrOPZObp1710982118573.js";import{c as _e,d as fe,a as me}from"./ExtensionUtilities.lD_0252w1710982118573.js";import{m as ye}from"./mercator.ciCk-WjI1710982118573.js";import"./Water2.6ucHrh3t1710982118573.js";import"./Reflector.bYMHWcft1710982118573.js";const ge=["position"],Te=["blending","map"],Me=["name","renderOrder"],xe=["args"],Be=["color","side"],be=["renderOrder","position-z"],we=["position"],Se=o("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1),ve=["renderOrder"],Le=["position"],ke=o("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1),Ee={__name:"jiangSuMapMesh",async setup(j){let s,a;(()=>{z.prototype.computeBoundsTree=_e,z.prototype.disposeBoundsTree=fe,oe.prototype.raycast=me})();const y=([s,a]=$(()=>he("./plugins/simpleGIS/json/320000_full.json","features")),s=await s,a(),s),{map:F}=([s,a]=$(()=>W({map:"./plugins/simpleGIS/image/icon.png"})),s=await s,a(),s),I=y[0].properties.centroid,p=ye();p.center(I).translate([0,0]);const c=[];(()=>{y.forEach(t=>{const g=new se("hsl( 16, ".concat(Math.random()*30+55,"%, ").concat(Math.random()*30+55,"%)")).getHex(),e=Math.random()*.3+.3,{centroid:n,oneCenter:X,center:J,name:S}=t.properties,{coordinates:K,type:v}=t.geometry,L=n||X||J||[0,0],d=p(L);d[1]=-d[1],d[2]=e,c.push({type:"Html",position:d,name:S});const u=p(L);u[1]=-u[1]+.2,u[2]=e+.22,c.push({type:"Sprite",position:u}),K.forEach(k=>{function E(h){const T=new ae;h.forEach((M,x)=>{const[_,C]=p(M);x===0?T.moveTo(_,-C):T.lineTo(_,-C)}),c.push({type:"Shape",shape:T,name:S,color:g,depth:e});const P=[];h.forEach(M=>{const[x,_]=p(M);P.push(x,-_,0)}),c.push({type:"Line",points:new Float32Array(P),depth:e})}v==="MultiPolygon"&&k.forEach(h=>E(h)),v==="Polygon"&&E(k)})})})();const N=t=>{t.rotation.x=-Math.PI/2;const e=new ne().setFromObject(t).getCenter(new re),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]},l=Y();q(()=>{l.value&&(N(l.value),l.value.children.forEach(t=>{t.type==="Mesh"&&t.geometry.computeBoundsTree()}))});const R=t=>{t.object.material.opacity=.4},V=t=>{t.material.opacity=1},H={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,g)=>(r(),i("TresGroup",{ref_key:"tgRef",ref:l},[(r(),i(B,null,Q(c,(e,n)=>(r(),i(B,{key:"".concat(n)},[e.type==="Html"?(r(),b(m(Z),O({key:0},H,{position:e.position}),{default:w(()=>[o("span",null,U(e.name),1)]),_:2},1040,["position"])):f("",!0),e.type==="Sprite"?(r(),i("TresSprite",{key:1,position:e.position,scale:.3,renderOrder:1e3},[o("TresSpriteMaterial",{color:16711680,blending:ee,map:m(F)},null,8,Te)],8,ge)):f("",!0),e.type==="Shape"?(r(),i("TresMesh",{key:2,name:e.name,renderOrder:n,onPointerEnter:R,onPointerLeave:V},[o("TresExtrudeGeometry",{args:[e.shape,{depth:e.depth,bevelEnabled:!1}]},null,8,xe),o("TresMeshStandardMaterial",{color:e.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:te},null,8,Be)],40,Me)):f("",!0),e.type==="Line"?(r(),i(B,{key:3},[o("TresLine",{renderOrder:n,"position-z":e.depth+1e-4},[o("TresBufferGeometry",{position:[e.points,3]},null,8,we),Se],8,be),o("TresLine",{renderOrder:n,"position-z":-1e-4},[o("TresBufferGeometry",{position:[e.points,3]},null,8,Le),ke],8,ve)],64)):f("",!0)],64))),64))],512))}},Pe=o("TresPerspectiveCamera",{position:[0,12,0],fov:75,near:.1,far:1e3},null,-1),Ce=o("TresAmbientLight",{intensity:8.8},null,-1),$e=o("TresDirectionalLight",{position:[0,10,5],intensity:.2},null,-1),ze=o("TresDirectionalLight",{position:[0,10,-5],intensity:.2},null,-1),De=o("TresDirectionalLight",{position:[5,10,0],intensity:.2},null,-1),Ge=o("TresDirectionalLight",{position:[-5,10,0],intensity:.2},null,-1),Ve=ie({__name:"jiangSuMap",setup(j){const s=D({clearColor:"#ffdbd1",alpha:!0,antialias:!0}),a=D({enableDamping:!0,dampingFactor:.05});return(A,y)=>(r(),b(m(pe),O(s,{"window-size":""}),{default:w(()=>[Pe,G(m(de),ce(le(a)),null,16),Ce,$e,ze,De,Ge,(r(),b(ue,null,{default:w(()=>[G(Ee)]),_:1}))]),_:1},16))}});export{Ve as default};
