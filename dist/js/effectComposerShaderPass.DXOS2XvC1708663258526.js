import{$ as x,k as m,ak as k,a5 as T,a4 as M,o as g,c as U,W as e,E as D,aZ as E,aU as R,v as $,D as L,K as _,a8 as N,a as h,ab as V}from"./vendor.mx_kdcfJ1708663258526.js";import{R as F,E as p,S as G}from"./EffectComposer.2SdxsMoc1708663258526.js";import{U as z}from"./UnrealBloomPass.57-IHCX41708663258526.js";const j=e("TresBoxGeometry",{args:[1,1,1]},null,-1),A=e("TresMeshNormalMaterial",null,null,-1),H=[j,A],I=e("TresBoxGeometry",{args:[1,1,1]},null,-1),K=e("TresMeshNormalMaterial",null,null,-1),W=[I,K],Z=x({__name:"ecLayerShaderPass",setup(w){const a=m(),r=m(),{camera:t,renderer:n,scene:f,sizes:c}=k(),d={strength:.572,radius:.51,threshold:0};let v=null,s=null,o=null;const P=(l,i,u,B,S)=>{v=new F(l,i);const C=new z(new E(B,S),d.strength,d.radius,d.threshold);s=new p(u),s.renderToScreen=!1,s.addPass(v),s.addPass(C)},y=l=>{o=new p(l);const i=new R({uniforms:{baseTexture:{value:null},bloomTexture:{value:s.renderTarget2.texture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = ( vec4( 1.0 ) *texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n            }\n        ",defines:{}}),u=new G(i,"baseTexture");u.needsSwap=!0,o.addPass(v),o.addPass(u)};T(()=>{a.value&&a.value.layers.set(0),r.value&&r.value.layers.set(1),c.width.value&&(P(f.value,t.value,n.value,c.width.value,c.height.value),y(n.value))});const{onLoop:b}=M();return b(()=>{s&&o&&t.value&&(n.value.clear(),t.value.layers.set(1),s.render(),n.value.clearDepth(),t.value.layers.set(0),o.render(f.value,t.value))}),(l,i)=>(g(),U(D,null,[e("TresMesh",{ref_key:"normalBox",ref:a,position:[3,2,1]},H,512),e("TresMesh",{ref_key:"shineBox",ref:r,position:[0,2,-4]},W,512)],64))}}),q=e("TresPerspectiveCamera",{position:[10,10,10]},null,-1),J=e("TresAmbientLight",{intensity:1},null,-1),O=e("TresGridHelper",{args:[10,10]},null,-1),ee=x({__name:"effectComposerShaderPass",setup(w){const a=m();return T(()=>{if(a.value){let r=a.value.context.renderer.value;r.autoClear=!1}}),(r,t)=>(g(),$(_(N),{disableRender:"","window-size":"",ref_key:"tcRef",ref:a},{default:L(()=>[q,J,h(_(V)),O,h(Z)]),_:1},512))}});export{ee as default};
