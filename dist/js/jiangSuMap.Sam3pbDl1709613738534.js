import{an as $,ba as K,k as Q,a5 as W,o as r,c as i,E as B,G as Y,v as b,D as S,W as o,t as U,a7 as O,K as m,al as Z,X as f,b9 as ee,aR as te,b5 as G,at as oe,aq as se,be as ne,aQ as re,cA as ae,$ as ie,a0 as z,a8 as pe,a as D,a9 as ce,aa as le,ab as de,ag as ue}from"./vendor.briXmWCi1709613738534.js";import{l as he,c as _e,d as fe,a as me}from"./utils.8qkE6Zpz1709613738534.js";import{m as ye}from"./mercator.ciCk-WjI1709613738534.js";import"./Water2.mETg1N7P1709613738534.js";import"./Reflector.KGUC8X1-1709613738534.js";const ge=["position"],Te=["blending","map"],Me=["name","renderOrder"],xe=["args"],Be=["color","side"],be=["renderOrder","position-z"],Se=["position"],ve=o("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1),we=["renderOrder"],Le=["position"],Ee=o("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1),Pe={__name:"jiangSuMapMesh",async setup(j){let s,a;(()=>{G.prototype.computeBoundsTree=_e,G.prototype.disposeBoundsTree=fe,oe.prototype.raycast=me})();const y=([s,a]=$(()=>he("./plugins/simpleGIS/json/320000_full.json","features")),s=await s,a(),s),{map:F}=([s,a]=$(()=>K({map:"./plugins/simpleGIS/image/icon.png"})),s=await s,a(),s),R=y[0].properties.centroid,p=ye();p.center(R).translate([0,0]);const c=[];(()=>{y.forEach(t=>{const g=new se("hsl( 16, ".concat(Math.random()*30+55,"%, ").concat(Math.random()*30+55,"%)")).getHex(),e=Math.random()*.3+.3,{centroid:n,oneCenter:X,center:q,name:v}=t.properties,{coordinates:J,type:w}=t.geometry,L=n||X||q||[0,0],d=p(L);d[1]=-d[1],d[2]=e,c.push({type:"Html",position:d,name:v});const u=p(L);u[1]=-u[1]+.2,u[2]=e+.22,c.push({type:"Sprite",position:u}),J.forEach(E=>{function P(h){const T=new ae;h.forEach((M,x)=>{const[_,C]=p(M);x===0?T.moveTo(_,-C):T.lineTo(_,-C)}),c.push({type:"Shape",shape:T,name:v,color:g,depth:e});const k=[];h.forEach(M=>{const[x,_]=p(M);k.push(x,-_,0)}),c.push({type:"Line",points:new Float32Array(k),depth:e})}w==="MultiPolygon"&&E.forEach(h=>P(h)),w==="Polygon"&&P(E)})})})();const I=t=>{t.rotation.x=-Math.PI/2;const e=new ne().setFromObject(t).getCenter(new re),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]},l=Q();W(()=>{l.value&&(I(l.value),l.value.children.forEach(t=>{t.type==="Mesh"&&t.geometry.computeBoundsTree()}))});const N=t=>{t.object.material.opacity=.4},V=t=>{t.material.opacity=1},H={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,g)=>(r(),i("TresGroup",{ref_key:"tgRef",ref:l},[(r(),i(B,null,Y(c,(e,n)=>(r(),i(B,{key:"".concat(n)},[e.type==="Html"?(r(),b(m(Z),O({key:0},H,{position:e.position}),{default:S(()=>[o("span",null,U(e.name),1)]),_:2},1040,["position"])):f("",!0),e.type==="Sprite"?(r(),i("TresSprite",{key:1,position:e.position,scale:.3,renderOrder:1e3},[o("TresSpriteMaterial",{color:16711680,blending:ee,map:m(F)},null,8,Te)],8,ge)):f("",!0),e.type==="Shape"?(r(),i("TresMesh",{key:2,name:e.name,renderOrder:n,onPointerEnter:N,onPointerLeave:V},[o("TresExtrudeGeometry",{args:[e.shape,{depth:e.depth,bevelEnabled:!1}]},null,8,xe),o("TresMeshStandardMaterial",{color:e.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:te},null,8,Be)],40,Me)):f("",!0),e.type==="Line"?(r(),i(B,{key:3},[o("TresLine",{renderOrder:n,"position-z":e.depth+1e-4},[o("TresBufferGeometry",{position:[e.points,3]},null,8,Se),ve],8,be),o("TresLine",{renderOrder:n,"position-z":-1e-4},[o("TresBufferGeometry",{position:[e.points,3]},null,8,Le),Ee],8,we)],64)):f("",!0)],64))),64))],512))}},ke=o("TresPerspectiveCamera",{position:[0,12,0],fov:75,near:.1,far:1e3},null,-1),Ce=o("TresAmbientLight",{intensity:8.8},null,-1),$e=o("TresDirectionalLight",{position:[0,10,5],intensity:.2},null,-1),Ge=o("TresDirectionalLight",{position:[0,10,-5],intensity:.2},null,-1),ze=o("TresDirectionalLight",{position:[5,10,0],intensity:.2},null,-1),De=o("TresDirectionalLight",{position:[-5,10,0],intensity:.2},null,-1),Ne=ie({__name:"jiangSuMap",setup(j){const s=z({clearColor:"#ffdbd1",alpha:!0,antialias:!0}),a=z({enableDamping:!0,dampingFactor:.05});return(A,y)=>(r(),b(m(pe),O(s,{"window-size":""}),{default:S(()=>[ke,D(m(de),ce(le(a)),null,16),Ce,$e,Ge,ze,De,(r(),b(ue,null,{default:S(()=>[D(Pe)]),_:1}))]),_:1},16))}});export{Ne as default};
