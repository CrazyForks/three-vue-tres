import{av as l,bc as p,au as u,aw as m,bd as d,az as f,aH as i,ap as h}from"./vendor.Cjb8724R1710847861472.js";import{W as w}from"./Water2.bTPO8OV11710847861472.js";import{c as g,d as b,a as x}from"./ExtensionUtilities.lqIvJsTP1710847861472.js";const B=r=>{r.computeBoundingBox();const{max:e,min:o}=r.boundingBox;r.deleteAttribute("uv");const t=e.x-o.x,a=e.y-o.y,n=[];for(let s=0;s<r.attributes.position.count;s++)n.push((r.attributes.position.getX(s)-o.x)/t),n.push((r.attributes.position.getY(s)-o.y)/a);const c=new Float32Array(n);r.setAttribute("uv",new l(c,2))},T=(r,e)=>new Promise((o,t)=>{p(r,{},{method:"get"}).then(a=>{e&&o(a[e]),o(a.features)}).catch(a=>{console.error(a),t(error)})}),M=()=>{u.prototype.computeBoundsTree=g,u.prototype.disposeBoundsTree=b,m.prototype.raycast=x},_=async r=>{const e=await d(["./plugins/water/images/Water_1_M_Normal.jpg","./plugins/water/images/Water_2_M_Normal.jpg"]),o=r.geometry.clone();B(o),o.computeBoundsTree();const t=new w(o,{color:new f("#fff"),scale:20,flowDirection:new i(1,1),textureWidth:1024,textureHeight:1024,normalMap0:e[0],normalMap1:e[1]});return t.material.transparent=!0,t.material.depthWrite=!0,t.material.depthTest=!0,t.material.side=h,t.material.uniforms.config.value.w=20,t.material.uniforms.reflectivity.value=.46,t};function P(r){const e=[];for(let t=0;t<r.length;t++)e.push(new i(r[t].x,r[t].y));const o=new i;for(let t=0;t<e.length;t++)o.add(e[t]);o.divideScalar(e.length);for(let t=0;t<e.length;t++)e[t].sub(o);return{points:e,centerPoint:o}}export{P as g,M as i,T as l,B as r,_ as s};
