import{Z as P,aA as $,aB as E,aN as G,aR as b,a4 as F,a3 as J,aM as O,o as f,c as Q,J as m,$ as p,a0 as X,a1 as Z,a2 as q,af as H,v as w,C,a6 as I,a7 as K,a as x,a8 as k,a9 as S,aa as U,aD as W,V as _}from"./vendor.8ca16d431703042697396.js";import{r as Y,u as j}from"./device.15437f521703042697396.js";import"./BufferGeometryUtils.41bfa23a1703042697396.js";import"./EffectComposer.0bfc07791703042697396.js";const ee=["object"],ae=P({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(g){let r,n;const a=g,{nodes:t}=([r,n]=$(()=>E("./plugins/industry4/model/modelDraco.glb",{draco:!0})),r=await r,n(),r),v=Y(t.Sketchfab_model),{camera:c,renderer:y,scene:l,sizes:B}=G();let d=null,u=null,s=null;const L=new b({color:"black"});F(()=>{if(c.value){l.value.add(v);const{finalComposer:e,effectComposer:o,bloomPass:V}=j(l.value,c.value,y.value,B.width.value,B.height.value);d=e,u=o,s=V,s.threshold=a.threshold,s.strength=a.strength,s.radius=a.radius}a.threshold&&(s.threshold=a.threshold),a.strength&&(s.strength=a.strength),a.radius&&(s.radius=a.radius)});const i={},N=e=>{e.isMesh&&(i[e.uuid]=e.material,e.material=L)},R=e=>{i[e.uuid]&&(e.material=i[e.uuid],delete i[e.uuid])},{onLoop:T,onAfterLoop:A}=J();let M=.03,h=t.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),z=h.material.clone(),D=new b({color:new O("red"),transparent:!0,opacity:1});return T(({elapsed:e})=>{t.hull_turbine&&(t.hull_turbine.rotation.x+=M,t.blades_turbine_003.rotation.x+=M),Math.floor(e)%2?h.material=z:h.material=D}),A(({elapsed:e})=>{u&&(l.value.traverse(o=>{N(o)}),u.render(e)),d&&(l.value.traverse(o=>{R(o)}),d.render(e))}),(e,o)=>(f(),Q("primitive",{object:m(t).Sketchfab_model},null,8,ee))}}),te=_("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:1,far:1e3},null,-1),se=_("TresAmbientLight",{color:"#ffffff",intensity:"40"},null,-1),re=_("TresDirectionalLight",{position:[0,2,-4],intensity:1},null,-1),ce=P({__name:"deviceLight",setup(g){const r=p({clearColor:"#000",shadows:!0,alpha:!1,shadowMapType:X,outputColorSpace:Z,toneMapping:q,disableRender:!0}),n=p({autoRotate:!0}),a=p({threshold:0,strength:.972,radius:.21}),t=new H({title:"参数"});return t.addBinding(a,"threshold",{label:"阈值",min:0,max:1,step:.1}),t.addBinding(a,"strength",{label:"强度",min:0,max:3,step:.2}),t.addBinding(a,"radius",{label:"半径",min:0,max:1,step:.1}),(v,c)=>(f(),w(m(K),I(r,{"window-size":""}),{default:C(()=>[te,x(m(U),k(S(n)),null,16),se,re,(f(),w(W,null,{default:C(()=>[x(ae,k(S(a)),null,16)]),_:1}))]),_:1},16))}});export{ce as default};
