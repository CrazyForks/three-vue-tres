import{T as d,D as m}from"./three.module-cbea6429.js";import{h as g}from"./heatmap-d02141de.js";import{Y as f,ae as y,o as x,c as _,U as p,ab as M,ac as R}from"./vendor-19b019cc.js";const b=["position"],w=["args","rotate-x"],C=f({__name:"heatmapJS",props:{position:{default:[0,0,0]},Plane:{default:[50,50,1e3,1e3]},show2dCanvas:{type:Boolean,default:!0},heightRatio:{default:6}},setup(u,{expose:c}){const a=u;let i=null;const r=(t,o)=>Math.round((Math.random()*(t-o+1)+o)*10)/10;let e=null;const v=()=>(e=document.createElement("heatmap-canvas"),e.width=100,e.height=100,e.style.position="absolute",e.style.top="0",e.style.left="0",document.body.appendChild(e),i=g.create({container:e,width:256,height:256,blur:".8",radius:10}),i),s=t=>{if(!t){let h=0;for(t=[];h<2e3;)t.push({x:r(1,256),y:r(1,256),value:r(1,6)}),h++}i.setData({max:12,data:t}),n.needsUpdate=!0},n=new d(v()._renderer.canvas);s();const l={transparent:!0,side:m,vertexShader:"\n	uniform sampler2D heightMap;\n	uniform float heightRatio;\n	varying vec2 vUv;\n	varying float hValue;\n	varying vec3 cl;\n	void main() {\n	  vUv = uv;\n	  vec3 pos = position;\n	  cl = texture2D(heightMap, vUv).rgb;\n	  hValue = texture2D(heightMap, vUv).r;\n	  pos.y = hValue * heightRatio;\n	  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.0);\n	}",fragmentShader:"\n	varying float hValue;\n	varying vec3 cl;\n	void main() {\n		float v = abs(hValue - 1.);\n		gl_FragColor = vec4(cl, .8 - v * v*1.1) ; \n	}",uniforms:{heightMap:{type:"t",value:n},heightRatio:{value:a.heightRatio}}};return y(()=>{e.style.display="".concat(a.show2dCanvas?"block":"none"),a.heightRatio&&(l.uniforms.heightRatio.value=a.heightRatio)}),c({setData:s}),(t,o)=>(x(),_("TresMesh",{position:a.position},[p("TresPlaneGeometry",{args:a.Plane,"rotate-x":-Math.PI*.5},null,8,w),p("TresShaderMaterial",M(R(l)),null,16)],8,b))}});export{C as _};
