import{Y as P,az as E,aA as G,aM as V,bm as b,a3 as F,a2 as I,aL as O,o as m,c as Q,I as f,Z as p,$ as U,a0 as X,a1 as Y,ae as Z,s as w,B as C,a5 as q,a6 as H,a as x,a7 as k,a8 as S,a9 as J,aC as K,U as _}from"./vendor-7c4537c1.js";import{r as W,u as j}from"./device-e6f6b2e9.js";import"./BufferGeometryUtils-58c8fde2.js";const ee=["object"],te=P({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(g){let r,n;const t=g,{nodes:a}=([r,n]=E(()=>G("./plugins/industry4/model/modelDraco.glb",{draco:!0})),r=await r,n(),r),v=W(a.Sketchfab_model),{camera:c,renderer:y,scene:l,sizes:B}=V();let d=null,u=null,s=null;const L=new b({color:"black"});F(()=>{if(c.value){l.value.add(v);const{finalComposer:e,effectComposer:o,bloomPass:D}=j(l.value,c.value,y.value,B.width.value,B.height.value);d=e,u=o,s=D,s.threshold=t.threshold,s.strength=t.strength,s.radius=t.radius}t.threshold&&(s.threshold=t.threshold),t.strength&&(s.strength=t.strength),t.radius&&(s.radius=t.radius)});const i={},N=e=>{e.isMesh&&(i[e.uuid]=e.material,e.material=L)},T=e=>{i[e.uuid]&&(e.material=i[e.uuid],delete i[e.uuid])},{onLoop:z,onAfterLoop:A}=I();let M=.03,h=a.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),R=h.material.clone(),$=new b({color:new O("red"),transparent:!0,opacity:1});return z(({elapsed:e})=>{a.hull_turbine&&(a.hull_turbine.rotation.x+=M,a.blades_turbine_003.rotation.x+=M),Math.floor(e)%2?h.material=R:h.material=$}),A(({elapsed:e})=>{u&&(l.value.traverse(o=>{N(o)}),u.render(e)),d&&(l.value.traverse(o=>{T(o)}),d.render(e))}),(e,o)=>(m(),Q("primitive",{object:f(a).Sketchfab_model},null,8,ee))}}),ae=_("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:1,far:1e3},null,-1),se=_("TresAmbientLight",{color:"#ffffff",intensity:"40"},null,-1),re=_("TresDirectionalLight",{position:[0,2,-4],intensity:1},null,-1),ie=P({__name:"deviceLight",setup(g){const r=p({clearColor:"#000",shadows:!0,alpha:!1,shadowMapType:U,outputColorSpace:X,toneMapping:Y}),n=p({autoRotate:!0}),t=p({threshold:0,strength:.972,radius:.21}),a=new Z({title:"参数"});return a.addBinding(t,"threshold",{label:"阈值",min:0,max:1,step:.1}),a.addBinding(t,"strength",{label:"强度",min:0,max:3,step:.2}),a.addBinding(t,"radius",{label:"半径",min:0,max:1,step:.1}),(v,c)=>(m(),w(f(H),q(r,{"window-size":""}),{default:C(()=>[ae,x(f(J),k(S(n)),null,16),se,re,(m(),w(K,null,{default:C(()=>[x(te,k(S(t)),null,16)]),_:1}))]),_:1},16))}});export{ie as default};
